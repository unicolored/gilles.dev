<main class="relative block">
  <div class="portfolio-tv relative">
    <!-- Carousel wrapper with flex and transition -->
    <div class="relative flex h-[82vh] flex-col">
      @if (currentItems(); as items) { @for (item of items.slice(0,1); track item.slug; let i = $index) { @if
      (item.cloudinaryId) {
      <!-- Each slide takes full width -->
      <div class="bg-bkg dark:bg-dark-bkg absolute flex h-[84vh] w-full">
        <a
          animate.enter="enter-animation"
          class="w-full"
          [href]="['/portfolio', 'item', item.slug]"
          [routerLink]="['/portfolio', 'item', item.slug]"
        >
          <figure class="m-0 flex h-full w-full flex-col items-center justify-center">
            @if (item.attachments.length > 1) {
            <span
              class="bg-primary text-dark-primary absolute right-3 bottom-3 z-20 flex h-7 w-7 items-center justify-center rounded-4xl"
              >{{item.attachments.length}}</span
            >
            }
            <span class="item-body relative flex h-full w-full grow items-center">
              <!-- Adjust height as needed -->
              <img
                [ngSrc]="'cloud-coelis/prod/'+item.cloudinaryId"
                fill
                [priority]="i <= 4"
                placeholder
                sizes="(min-width: 66em) 33vw, (min-width: 44em) 50vw, 100vw"
                [alt]="item.title"
                [title]="item.title"
                class="object-contain"
              />
            </span>
            @if (item.description) {
            <figcaption class="prose dark:prose-invert mb-8 p-4 text-center">
              {{ portfolioService.stripTags(item.description) }}
            </figcaption>
            }
          </figure>
        </a>
      </div>
      } } }
    </div>

    <div class="hidden">
      <!-- Navigation buttons (optional, for manual control) -->
      <button
        class="absolute top-1/2 left-0 -translate-y-1/2 transform rounded-full bg-white/50 p-2 transition hover:bg-white/70 dark:bg-black/50 dark:hover:bg-black/70"
        (click)="prev()"
      >
        ←
      </button>
      <button
        class="absolute top-1/2 right-0 -translate-y-1/2 transform rounded-full bg-white/50 p-2 transition hover:bg-white/70 dark:bg-black/50 dark:hover:bg-black/70"
        (click)="next()"
      >
        →
      </button>
    </div>

    <!-- Indicators (optional dots for current slide) -->
    <div class="absolute bottom-4 left-1/2 flex hidden -translate-x-1/2 transform space-x-2">
      @if (items(); as items) { @for (item of items; track $index; let idx = $index) {
      <span
        class="h-3 w-3 cursor-pointer rounded-full transition"
        [class.bg-gray-400]="currentIndex() !== idx"
        [class.bg-blue-500]="currentIndex() === idx"
        (click)="goToSlide(idx)"
      ></span>
      } }
    </div>
  </div>

  <hr />
  @if (remoteUrl(); as url) {
  <div class="m-12 flex flex-col items-center justify-center text-center">
    <qrcode
      [qrdata]="url"
      [width]="256"
      [errorCorrectionLevel]="'M'"
      [colorDark]="'#274d74ff'"
      [colorLight]="'#ffffff'"
    ></qrcode>
    {{ url }}
  </div>
  }
</main>
